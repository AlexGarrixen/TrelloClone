(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),o=a(128),l=a.n(o),i=a(15),s=a.n(i),u=function(e){var t=e.children,a=e.component,n=void 0===a?"div":a;return r.a.createElement(n,{className:"container mx-auto px-2"},t)};u.propTypes={children:s.a.node,component:s.a.elementType};var m=u,p=a(135),f=a(134),d=function(e){var t=e.onClick;return r.a.createElement(p.a,{color:"primary",onClick:t,startIcon:r.a.createElement(f.a.Plus,null)},"Add")},b=a(124),h=a.n(b),E=a(36),g=a(141),v=function(e){var t=e.title,a=e.picture,n=e._id;return r.a.createElement(g.a,{component:E.b,to:"/board/".concat(n,"/").concat(t),title:t,picture:a.path})};v.propTypes={title:s.a.string,picture:s.a.shape({path:s.a.string,publicId:s.a.string}),_id:s.a.string.isRequired};var O=v,y=a(140),j=a(19),_=a.n(j),w=a(142),C=function(){return r.a.createElement(w.a,{spacing:3},r.a.createElement(w.c,null),r.a.createElement(w.b,null))},k=function(e){var t=e.count,a=void 0===t?7:t;return r.a.createElement("ul",{className:"boards__grid"},_()(Array(a).keys()).map((function(e){return r.a.createElement(C,{key:e})})))},x=function(){var e=Object(c.c)((function(e){return e.boards})),t=e.isFetching,a=e.data,n=e.error;return n?r.a.createElement(y.a,{severity:"error"},n):t?r.a.createElement(k,{count:4}):r.a.createElement("ul",{className:"boards__grid"},a.map((function(e){return r.a.createElement(O,h()({key:e._id},e))})))},N=a(17),P=a(137),S=a(138),A=a(144),I=a(18),D=a.n(I),F=a(1),q=a.n(F),T=a(2),U=a.n(T),R=a(35),J=a.n(R),B=a(136),L=a(143),M=a(6),W=a.n(M),z=a(8),G=a(7),H=function(){var e=U()(q.a.mark((function e(t){var a,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W()({url:"".concat(G.a,"/attachments"),method:"DELETE",data:{attachmentId:t}});case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),Object(z.a)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),K=a(24);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){D()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(){var e,t=Object(c.b)(),a=Object(n.useState)([]),r=J()(a,2),o=r[0],l=r[1],i=Object(n.useState)(!1),s=J()(i,2),u=s[0],m=s[1],p=Object(B.a)({initialState:{title:"",picture:{path:"",publicId:""}},onSubmit:(e=U()(q.a.mark((function e(a){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(K.a)(a);case 3:n=e.sent,t(Object(N.g)(n)),t(Object(N.h)(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l([].concat(_()(o),[e.t0]));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(t){return e.apply(this,arguments)})}),f=p.form,d=p.handleChange,b=p.handleSubmit,h=p.setForm,E=Object(L.a)("".concat(G.a,"/attachments"),"POST"),g=E.data,v=E.filename,O=E.isUploading,y=E.requestUploadFile,j=E.progress,w=E.error,C=function(){var e=U()(q.a.mark((function e(t){var a,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target,!(n=a.files).length){e.next=7;break}if(!f.picture.path){e.next=6;break}return e.next=6,H(g.id);case 6:y(n[0]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=U()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.picture){e.next=5;break}return m(!0),e.next=4,H(g.id);case 4:m(!1);case 5:t(Object(N.h)(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null!==g&&h(V(V({},f),{},{picture:{path:g.path,publicId:g.id}}))}),[g]),Object(n.useEffect)((function(){w&&l([].concat(_()(o),["Upload file error"]))}),[w]),{errors:o,form:f,handleChange:d,handleSubmit:b,handleChangeFile:C,handleCancel:k,requestingDelAttachment:u,uploadAttachment:{filename:v,isUploading:O,progress:j}}},Y=function(){var e=Object(c.b)(),t=X(),a=t.errors,n=t.form,o=t.handleChange,l=t.handleSubmit,i=t.handleChangeFile,s=t.handleCancel,u=t.requestingDelAttachment,m=t.uploadAttachment,d=m.isUploading,b=m.progress,h=m.filename;return r.a.createElement("form",{className:"boards__registration-form",onSubmit:l},a.length>0&&r.a.createElement(y.a,{severity:"error",className:"mb-3"},a.map((function(e){return r.a.createElement("p",null,e)}))),u&&r.a.createElement(y.a,{severity:"info",className:"mb-3"},"Removing attachment"),r.a.createElement(S.a,{color:"primary",className:"boards__registration-form__icon-close",onClick:function(){return e(Object(N.h)(!1))}},r.a.createElement(f.a.Close,null)),r.a.createElement("div",{className:"boards__registration-form__picture",style:{backgroundImage:"url(".concat(n.picture.path,")")}}),d&&r.a.createElement(A.a,{percentage:b,filename:h,className:"my-3"}),r.a.createElement(P.a,{placeholder:"Add board title",name:"title",onChange:o,value:n.title,fullWidth:!0,autoComplete:"off"}),r.a.createElement(P.a,{type:"file",className:"hidden",id:"contained-button-file",accept:"image/*",onChange:i}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(p.a,{component:"span",startIcon:r.a.createElement(f.a.Image,null)},"Cover")),r.a.createElement("div",{className:"boards__registration-form__actions"},r.a.createElement(p.a,{variant:"text",onClick:s},"Cancel"),r.a.createElement(p.a,{color:"primary",disabled:n.title.length<1,startIcon:r.a.createElement(f.a.Plus,null),type:"submit"},"Create")))},Z=function(){var e=Object(c.b)();Object(n.useEffect)((function(){e(Object(N.f)())}),[])};l.a.setAppElement("#app");t.default=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.boards})).registrationModalOpen;return Z(),r.a.createElement("section",{className:"boards"},r.a.createElement(m,null,r.a.createElement("div",{className:"boards__actions"},r.a.createElement("h3",null,"All Boards"),r.a.createElement(d,{onClick:function(){return e(Object(N.h)(!0))}})),r.a.createElement(x,null)),r.a.createElement(l.a,{isOpen:t,onRequestClose:function(){return e(Object(N.h)(!1))},className:"modal modal--sm",overlayClassName:"modal__overlay"},r.a.createElement(Y,null)))}}}]);